<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DanBeem Vibe Site</title>

  <style>
    :root{
      --bg:#070a16;
      --panel:rgba(255,255,255,0.06);
      --border:rgba(148,163,184,0.20);
      --text:#e5e7eb;
      --muted:rgba(229,231,235,0.72);
      --a:#38bdf8;
      --b:#a78bfa;
      --c:#22c55e;
      --shadow: 0 20px 70px rgba(0,0,0,0.55);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 18% 0%, rgba(56,189,248,0.30), transparent 60%),
        radial-gradient(800px 500px at 90% 10%, rgba(167,139,250,0.22), transparent 55%),
        radial-gradient(900px 600px at 50% 120%, rgba(34,197,94,0.16), transparent 60%),
        linear-gradient(180deg, #070a16, #050615);
      overflow-x:hidden;
    }

    /* top nav */
    .nav{
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(5,6,21,0.55);
      border-bottom: 1px solid rgba(148,163,184,0.14);
    }
    .navInner{
      width:min(1100px, 94vw);
      margin:0 auto;
      padding: 10px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
      letter-spacing:0.02em;
    }
    .logo{
      width:38px;height:38px;border-radius:14px;
      display:grid;place-items:center;
      background: rgba(56,189,248,0.16);
      border:1px solid rgba(56,189,248,0.26);
      box-shadow: 0 12px 36px rgba(56,189,248,0.12);
    }
    .navBtns{
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .linkBtn{
      border:1px solid rgba(148,163,184,0.20);
      background: rgba(255,255,255,0.05);
      color:var(--text);
      border-radius: 999px;
      padding: 8px 11px;
      font-size: 12px;
      font-weight: 800;
      cursor:pointer;
    }
    .linkBtn:hover{
      border-color: rgba(56,189,248,0.35);
      background: rgba(255,255,255,0.07);
    }

    .wrap{
      width:min(1100px, 94vw);
      margin:0 auto;
      padding: 18px 0 70px;
    }

    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 24px;
      padding: 18px;
      box-shadow: var(--shadow);
    }
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 12px;border-radius:999px;
      font-size:12px;font-weight:800;
      color: rgba(56,189,248,0.95);
      background: rgba(56,189,248,0.10);
      border:1px solid rgba(56,189,248,0.22);
      margin-bottom:10px;
    }
    h1{
      margin:0 0 10px;
      font-size: clamp(44px, 7vw, 92px);
      line-height: 0.95;
      letter-spacing: -0.02em;
    }
    h2{ margin: 0 0 10px; font-size: 22px; }
    p{ margin:0 0 12px; color:var(--muted); line-height:1.65; }

    /* Scroll hero */
    .hero{
      height: 92vh;
      display:grid;
      place-items:center;
      border-radius: 28px;
      border:1px solid rgba(148,163,184,0.16);
      background:
        radial-gradient(900px 600px at 18% 20%, rgba(56,189,248,0.18), transparent 60%),
        radial-gradient(900px 600px at 80% 30%, rgba(167,139,250,0.14), transparent 60%),
        rgba(255,255,255,0.04);
      overflow:hidden;
      position:relative;
    }
    .heroInner{
      text-align:center;
      padding: 26px 18px;
      position:relative;
      z-index:2;
    }
    .heroSmall{
      font-size: 14px;
      letter-spacing:0.14em;
      text-transform:uppercase;
      color: rgba(229,231,235,0.7);
      margin-bottom: 12px;
    }
    #heroBig{
      font-weight: 950;
      transform-origin:center;
    }
    #heroSub{
      max-width: 760px;
      margin: 14px auto 0;
      font-size: 16px;
    }
    .glowOrb{
      position:absolute;
      width: 520px; height: 520px;
      border-radius: 999px;
      filter: blur(42px);
      opacity: 0.45;
      z-index:1;
      background: radial-gradient(circle, rgba(56,189,248,0.55), transparent 60%);
      left: -120px; top: -140px;
      transform: translate3d(0,0,0);
    }
    .glowOrb.two{
      background: radial-gradient(circle, rgba(167,139,250,0.55), transparent 60%);
      left: auto; right: -160px; top: 40px;
      width: 560px; height: 560px;
      opacity:0.35;
    }

    /* Section reveal */
    .reveal{
      opacity:0;
      transform: translateY(18px);
      transition: opacity 520ms ease, transform 520ms ease;
    }
    .reveal.show{
      opacity:1;
      transform: translateY(0);
    }

    /* Carousel */
    .carouselWrap{
      margin-top: 18px;
      position:relative;
    }
    .carousel{
      display:flex;
      gap: 14px;
      overflow-x:auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      padding: 6px 2px 10px;
      scrollbar-width: none;
    }
    .carousel::-webkit-scrollbar{ display:none; }
    .slide{
      flex: 0 0 86%;
      max-width: 86%;
      height: 340px;
      border-radius: 22px;
      overflow:hidden;
      scroll-snap-align: center;
      border:1px solid rgba(148,163,184,0.16);
      background: rgba(0,0,0,0.18);
      position:relative;
    }
    .slide img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      transform: scale(1.02);
    }
    .slideCap{
      position:absolute;
      left:14px; bottom:14px;
      padding: 8px 10px;
      border-radius: 14px;
      background: rgba(0,0,0,0.45);
      border:1px solid rgba(148,163,184,0.18);
      font-weight: 800;
      font-size: 12px;
    }
    .carBtns{
      position:absolute;
      inset: 0;
      pointer-events:none;
    }
    .carBtn{
      pointer-events:auto;
      position:absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 44px; height: 44px;
      border-radius: 999px;
      border:1px solid rgba(148,163,184,0.22);
      background: rgba(0,0,0,0.35);
      color: var(--text);
      display:grid;
      place-items:center;
      cursor:pointer;
      backdrop-filter: blur(10px);
    }
    .carBtn:hover{ border-color: rgba(56,189,248,0.35); }
    .carBtn.left{ left: 8px; }
    .carBtn.right{ right: 8px; }

    .dots{
      display:flex;
      gap:8px;
      justify-content:center;
      margin-top: 10px;
    }
    .dot{
      width: 8px; height: 8px;
      border-radius: 999px;
      background: rgba(229,231,235,0.22);
      border:1px solid rgba(148,163,184,0.18);
      cursor:pointer;
    }
    .dot.active{
      background: rgba(56,189,248,0.85);
      border-color: rgba(56,189,248,0.30);
    }

    /* Sticky pinned section (Apple-ish) */
    .pin{
      margin-top: 18px;
      border-radius: 24px;
      border:1px solid rgba(148,163,184,0.16);
      background: rgba(255,255,255,0.04);
      overflow:hidden;
    }
    .pinInner{
      height: 180vh; /* makes room for scrolling */
      position:relative;
    }
    .pinSticky{
      position: sticky;
      top: 74px; /* below nav */
      padding: 18px;
    }
    .pinCard{
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 14px;
      align-items: center;
      background: rgba(0,0,0,0.20);
      border: 1px solid rgba(148,163,184,0.16);
      border-radius: 22px;
      padding: 16px;
    }
    @media (max-width: 860px){
      .pinCard{ grid-template-columns: 1fr; }
      .slide{ height: 280px; }
    }
    .pinTitle{
      margin: 0 0 8px;
      font-size: 28px;
      line-height:1.1;
      letter-spacing:-0.01em;
    }
    .pinText{
      margin:0;
      color: var(--muted);
    }
    .pinVisual{
      height: 260px;
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,0.16);
      background:
        radial-gradient(500px 300px at 20% 20%, rgba(56,189,248,0.22), transparent 60%),
        radial-gradient(500px 300px at 80% 30%, rgba(167,139,250,0.18), transparent 60%),
        rgba(255,255,255,0.03);
      display:grid;
      place-items:center;
      font-weight: 900;
      font-size: 16px;
      text-align:center;
      padding: 10px;
    }

    /* Buttons */
    .btnRow{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top: 12px; }
    button{
      border:0;
      cursor:pointer;
      border-radius: 14px;
      padding: 12px 16px;
      font-weight: 900;
      font-size: 14px;
      color:#07111f;
      background: linear-gradient(135deg, rgba(56,189,248,1), rgba(167,139,250,0.95));
      box-shadow: 0 18px 55px rgba(56,189,248,0.18);
    }
    button.secondary{
      color:var(--text);
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(148,163,184,0.22);
      box-shadow:none;
    }

    /* App sections */
    .app{ margin-top: 18px; }
    .hidden{ display:none; }

    .bigNumber{
      font-size: 54px;
      font-weight: 950;
      letter-spacing: 0.02em;
      margin: 10px 0 6px;
      text-align:center;
    }
    .subtle{ font-size: 12px; color: rgba(229,231,235,0.55); text-align:center; }
    .box{
      border-radius: 18px;
      padding: 14px;
      border:1px solid rgba(148,163,184,0.16);
      background: rgba(0,0,0,0.18);
      margin-top: 12px;
    }
    input, select{
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.22);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      padding: 10px 12px;
      font-size: 14px;
      outline: none;
    }
    img.inline{
      width:100%;
      border-radius: 18px;
      border:1px solid rgba(148,163,184,0.16);
      display:block;
      margin-top: 12px;
    }
  </style>
</head>

<body>
  <div class="nav">
    <div class="navInner">
      <div class="brand">
        <div class="logo">⚡</div>
        <div>DanBeem</div>
      </div>
      <div class="navBtns">
        <button class="linkBtn" onclick="scrollToId('top')">Top</button>
        <button class="linkBtn" onclick="scrollToId('carousel')">Bread</button>
        <button class="linkBtn" onclick="scrollToId('pin')">Scroll Magic</button>
        <button class="linkBtn" onclick="showApp('apps')">Apps</button>
      </div>
    </div>
  </div>

  <div class="wrap" id="top">
    <!-- HERO -->
    <section class="hero">
      <div class="glowOrb" id="orb1"></div>
      <div class="glowOrb two" id="orb2"></div>

      <div class="heroInner">
        <div class="heroSmall">Vibe Code live on GitHub Pages</div>
        <h1 id="heroBig">BREAD ENERGY</h1>
        <p id="heroSub">Scroll down. Watch the text move. Swipe the carousel. Trigger the sticky section. Then open the mini apps.</p>
        <div class="btnRow">
          <button onclick="showApp('apps')">Open mini apps</button>
          <button class="secondary" onclick="scrollToId('carousel')">Show me bread</button>
        </div>
      </div>
    </section>

    <!-- CAROUSEL -->
    <section id="carousel" class="panel reveal" style="margin-top:18px;">
      <div class="pill">Bread carousel</div>
      <h2>Swipeable loaf gallery</h2>
      <p>Scroll snapping on mobile plus arrows and dots. No libraries.</p>

      <div class="carouselWrap">
        <div class="carousel" id="car">
          <div class="slide"><img src="bread1.jpg" alt="Bread 1"><div class="slideCap">bread1.jpg</div></div>
          <div class="slide"><img src="bread2.jpg" alt="Bread 2"><div class="slideCap">bread2.jpg</div></div>
          <div class="slide"><img src="bread3.jpg" alt="Bread 3"><div class="slideCap">bread3.jpg</div></div>
          <div class="slide"><img src="bread4.jpg" alt="Bread 4"><div class="slideCap">bread4.jpg</div></div>
          <div class="slide"><img src="bread5.jpg" alt="Bread 5"><div class="slideCap">bread5.jpg</div></div>
          <div class="slide"><img src="bread6.jpg" alt="Bread 6"><div class="slideCap">bread6.jpg</div></div>
        </div>

        <div class="carBtns">
          <div class="carBtn left" onclick="carStep(-1)" aria-label="Previous">‹</div>
          <div class="carBtn right" onclick="carStep(1)" aria-label="Next">›</div>
        </div>
      </div>

      <div class="dots" id="dots" aria-label="Carousel dots"></div>
    </section>

    <!-- PINNED SCROLL MAGIC -->
    <section id="pin" class="pin reveal" style="margin-top:18px;">
      <div class="pinInner" id="pinInner">
        <div class="pinSticky">
          <div class="panel" style="box-shadow:none;">
            <div class="pill">Scroll magic</div>
            <h2>Sticky section with changing text</h2>
            <p>This is the Apple-ish effect. As you scroll, the text swaps. It feels fancy but it’s just math.</p>

            <div class="pinCard">
              <div>
                <div class="pinTitle" id="pinTitle">Starter</div>
                <p class="pinText" id="pinText">Feed it. Name it. Respect it. It is alive.</p>
                <div class="btnRow" style="justify-content:flex-start;">
                  <button class="secondary" onclick="scrollToId('apps')">Jump to apps</button>
                </div>
              </div>
              <div class="pinVisual" id="pinVisual">Scroll down<br>to change steps</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- MINI APPS -->
    <section id="apps" class="panel reveal app" style="margin-top:18px;">
      <div class="pill">Mini apps</div>
      <h2>Tools and toys</h2>
      <p>These are intentionally simple so you can learn by expanding them.</p>

      <div class="btnRow">
        <button onclick="showApp('sourdough')">Sourdough</button>
        <button onclick="showApp('dad')">Dad Jokes</button>
        <button onclick="showApp('timer')">Bread Timer</button>
        <button class="secondary" onclick="showApp('apps')">Close apps</button>
      </div>

      <!-- App container -->
      <div id="appHome" class="box">
        Pick an app above. You can keep adding more modules here later.
      </div>

      <!-- SOURDOUGH -->
      <div id="appSourdough" class="box hidden">
        <h2>Important Question</h2>
        <p>Are you interested in learning about Dan’s love of sourdough bread?</p>

        <div id="sd1" class="btnRow">
          <button onclick="sdYes()">Yes</button>
          <button class="secondary" onclick="sdNo()">No</button>
        </div>

        <div id="sd2" class="hidden">
          <p>Let’s revisit this. Starter care, hydration ratios, cold retard timing, unsolicited bread facts.</p>
          <div class="btnRow"><button onclick="sdYes()">Yes</button></div>
        </div>

        <div id="sd3" class="hidden">
          <h2>Welcome to the Crumb Zone</h2>
          <p>Sourdough is a responsibility.</p>
          <img class="inline" src="sourdough_hero_loaf.jpg" alt="Hero loaf">
          <div class="btnRow">
            <button class="secondary" onclick="resetSourdough()">Restart</button>
          </div>
        </div>
      </div>

      <!-- DAD JOKES -->
      <div id="appDad" class="box hidden">
        <h2>Dad Joke Generator</h2>
        <p>Press button. Receive dad joke.</p>
        <div class="btnRow">
          <button onclick="newJoke()">Generate</button>
          <button class="secondary" onclick="copyJoke()">Copy</button>
        </div>
        <div class="box" style="margin-top:10px;">
          <div class="subtle" style="text-align:left;">Joke</div>
          <div id="jokeText" style="font-size:18px;font-weight:900;margin-top:6px;">Click Generate.</div>
          <div id="copyMsg" class="subtle hidden" style="margin-top:8px;text-align:left;">Copied.</div>
        </div>
      </div>

      <!-- TIMER -->
      <div id="appTimer" class="box hidden">
        <h2>Bread Timer</h2>
        <p>Presets or custom. Offline. Beeps when done.</p>

        <div class="btnRow" style="justify-content:flex-start;">
          <label style="color:var(--muted); font-size:12px;">Preset</label>
          <select id="preset" onchange="applyPreset()">
            <option value="">Choose one</option>
            <option value="20:00">Preheat (20:00)</option>
            <option value="45:00">Bake covered (45:00)</option>
            <option value="15:00">Bake uncovered (15:00)</option>
            <option value="30:00">Proof check (30:00)</option>
          </select>
        </div>

        <div class="btnRow" style="justify-content:flex-start;">
          <label style="color:var(--muted); font-size:12px;">Set time</label>
          <input id="mins" type="number" min="0" placeholder="min" style="width:100px;">
          <input id="secs" type="number" min="0" max="59" placeholder="sec" style="width:100px;">
          <button class="secondary" onclick="setFromInputs()">Set</button>
        </div>

        <div class="bigNumber" id="timerDisplay">00:00</div>
        <div class="subtle" id="timerStatus">Not running</div>

        <div class="btnRow">
          <button onclick="startTimer()">Start</button>
          <button class="secondary" onclick="pauseTimer()">Pause</button>
          <button class="secondary" onclick="resetTimer()">Reset</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    // helpers
    function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }
    function scrollToId(id){
      const el = document.getElementById(id);
      if(!el) return;
      el.scrollIntoView({behavior:"smooth", block:"start"});
    }

    // HERO scroll effect + parallax orbs
    const heroBig = document.getElementById("heroBig");
    const heroSub = document.getElementById("heroSub");
    const orb1 = document.getElementById("orb1");
    const orb2 = document.getElementById("orb2");

    function heroScroll(){
      const sc = window.scrollY || 0;
      const p = clamp(sc / window.innerHeight, 0, 1.2);
      const scale = 1 + p * 0.55;
      const blur = p * 6;
      const op = 1 - p * 0.35;

      heroBig.style.transform = `scale(${scale})`;
      heroBig.style.filter = `blur(${blur}px)`;
      heroBig.style.opacity = `${op}`;

      heroSub.style.transform = `translateY(${p*16}px)`;
      heroSub.style.opacity = `${1 - p*0.55}`;

      orb1.style.transform = `translate(${sc*0.06}px, ${sc*0.04}px)`;
      orb2.style.transform = `translate(${sc*-0.04}px, ${sc*0.05}px)`;
    }
    window.addEventListener("scroll", heroScroll, {passive:true});
    window.addEventListener("resize", heroScroll);
    heroScroll();

    // Reveal on scroll
    const reveals = document.querySelectorAll(".reveal");
    const io = new IntersectionObserver((entries)=>{
      for(const e of entries){
        if(e.isIntersecting) e.target.classList.add("show");
      }
    }, { threshold: 0.14 });
    reveals.forEach(r => io.observe(r));

    // Carousel: dots and arrow stepping
    const car = document.getElementById("car");
    const dotsWrap = document.getElementById("dots");
    const slides = Array.from(car.querySelectorAll(".slide"));

    slides.forEach((_, i)=>{
      const d = document.createElement("button");
      d.className = "dot" + (i===0 ? " active" : "");
      d.setAttribute("aria-label", `Go to slide ${i+1}`);
      d.addEventListener("click", ()=> goToSlide(i));
      dotsWrap.appendChild(d);
    });

    function getActiveIndex(){
      const left = car.scrollLeft;
      let best = 0;
      let bestDist = Infinity;
      slides.forEach((s, i)=>{
        const dist = Math.abs(s.offsetLeft - left);
        if(dist < bestDist){ bestDist = dist; best = i; }
      });
      return best;
    }

    function setDot(i){
      const dots = Array.from(dotsWrap.children);
      dots.forEach((d, idx)=> d.classList.toggle("active", idx===i));
    }

    function goToSlide(i){
      slides[i].scrollIntoView({behavior:"smooth", inline:"center", block:"nearest"});
      setDot(i);
    }

    function carStep(dir){
      const i = getActiveIndex();
      const next = clamp(i + dir, 0, slides.length - 1);
      goToSlide(next);
    }

    car.addEventListener("scroll", ()=>{
      window.clearTimeout(car._t);
      car._t = window.setTimeout(()=> setDot(getActiveIndex()), 80);
    }, {passive:true});

    // Sticky text swap (Apple-ish)
    const pinInner = document.getElementById("pinInner");
    const pinTitle = document.getElementById("pinTitle");
    const pinText = document.getElementById("pinText");
    const pinVisual = document.getElementById("pinVisual");

    const steps = [
      { t:"Starter", d:"Feed it. Name it. Respect it. It is alive.", v:"Step 1<br>Starter" },
      { t:"Mix", d:"Flour, water, salt. Stir until chaos becomes dough.", v:"Step 2<br>Mix" },
      { t:"Fold", d:"Gentle folds. Every 30 minutes. Like bread yoga.", v:"Step 3<br>Folds" },
      { t:"Cold Retard", d:"The schedule saver. The flavor multiplier. The legend.", v:"Step 4<br>Cold retard" },
      { t:"Bake", d:"Steam, heat, and the moment of truth.", v:"Step 5<br>Bake" },
    ];

    function pinScroll(){
      const r = pinInner.getBoundingClientRect();
      const total = r.height - window.innerHeight;
      const progressed = clamp((window.innerHeight - r.top) / total, 0, 1);
      const idx = clamp(Math.floor(progressed * steps.length), 0, steps.length - 1);
      pinTitle.innerHTML = steps[idx].t;
      pinText.innerHTML = steps[idx].d;
      pinVisual.innerHTML = steps[idx].v;
    }
    window.addEventListener("scroll", pinScroll, {passive:true});
    window.addEventListener("resize", pinScroll);
    pinScroll();

    // Mini apps show/hide
    const appHome = document.getElementById("appHome");
    const appSourdough = document.getElementById("appSourdough");
    const appDad = document.getElementById("appDad");
    const appTimer = document.getElementById("appTimer");

    function showApp(which){
      appHome.classList.add("hidden");
      appSourdough.classList.add("hidden");
      appDad.classList.add("hidden");
      appTimer.classList.add("hidden");

      if(which === "apps"){
        appHome.classList.remove("hidden");
        resetSourdough();
        stopIntervalOnly();
        hideCopyMsg();
        scrollToId("apps");
      }
      if(which === "sourdough"){
        appSourdough.classList.remove("hidden");
        stopIntervalOnly();
        hideCopyMsg();
        resetSourdough();
        scrollToId("apps");
      }
      if(which === "dad"){
        appDad.classList.remove("hidden");
        stopIntervalOnly();
        resetSourdough();
        scrollToId("apps");
      }
      if(which === "timer"){
        appTimer.classList.remove("hidden");
        hideCopyMsg();
        resetSourdough();
        scrollToId("apps");
      }
    }

    // Sourdough app
    function sdNo(){
      document.getElementById("sd1").classList.add("hidden");
      document.getElementById("sd2").classList.remove("hidden");
    }
    function sdYes(){
      document.getElementById("sd1").classList.add("hidden");
      document.getElementById("sd2").classList.add("hidden");
      document.getElementById("sd3").classList.remove("hidden");
    }
    function resetSourdough(){
      const a = document.getElementById("sd1");
      const b = document.getElementById("sd2");
      const c = document.getElementById("sd3");
      if(!a || !b || !c) return;
      a.classList.remove("hidden");
      b.classList.add("hidden");
      c.classList.add("hidden");
    }

    // Dad jokes
    const dadJokes = [
      "I used to hate facial hair, but then it grew on me.",
      "I’m reading a book about anti-gravity. It’s impossible to put down.",
      "I don’t trust stairs. They’re always up to something.",
      "What do you call fake spaghetti? An impasta.",
      "I only know 25 letters of the alphabet. I don’t know y.",
      "How do you organize a space party? You planet.",
      "Why don’t eggs tell jokes? They’d crack each other up.",
      "I used to play piano by ear. Now I use my hands."
    ];
    function newJoke(){
      hideCopyMsg();
      const i = Math.floor(Math.random()*dadJokes.length);
      document.getElementById("jokeText").textContent = dadJokes[i];
    }
    function hideCopyMsg(){
      const m = document.getElementById("copyMsg");
      if(m) m.classList.add("hidden");
    }
    async function copyJoke(){
      const t = document.getElementById("jokeText").textContent || "";
      if(!t.trim()) return;
      try{
        await navigator.clipboard.writeText(t);
        document.getElementById("copyMsg").classList.remove("hidden");
      }catch{
        alert("Copy failed on this device. You can press and hold to copy manually.");
      }
    }

    // Timer
    let timerTotalSeconds = 0;
    let timerRemainingSeconds = 0;
    let timerInterval = null;

    function formatTime(s){
      const mm = String(Math.floor(s/60)).padStart(2,"0");
      const ss = String(s%60).padStart(2,"0");
      return `${mm}:${ss}`;
    }
    function setDisplay(){
      document.getElementById("timerDisplay").textContent = formatTime(timerRemainingSeconds);
      document.title = timerInterval ? `⏲️ ${formatTime(timerRemainingSeconds)} DanBeem` : "DanBeem Vibe Site";
    }
    function setStatus(t){
      document.getElementById("timerStatus").textContent = t;
    }
    function applyPreset(){
      const val = document.getElementById("preset").value;
      if(!val) return;
      const [m,s] = val.split(":");
      timerTotalSeconds = (Number(m||0)*60) + Number(s||0);
      timerRemainingSeconds = timerTotalSeconds;
      setDisplay();
      setStatus("Ready");
    }
    function setFromInputs(){
      const mm = Number(document.getElementById("mins").value||0);
      const ss = clamp(Number(document.getElementById("secs").value||0), 0, 59);
      timerTotalSeconds = (Math.max(mm,0)*60) + ss;
      timerRemainingSeconds = timerTotalSeconds;
      setDisplay();
      setStatus("Ready");
    }
    function startTimer(){
      if(timerRemainingSeconds <= 0){ setStatus("Set a time first"); return; }
      if(timerInterval) return;
      setStatus("Running");
      timerInterval = setInterval(()=>{
        timerRemainingSeconds -= 1;
        if(timerRemainingSeconds <= 0){
          timerRemainingSeconds = 0;
          setDisplay();
          stopIntervalOnly();
          setStatus("Done");
          beep();
          alert("Timer done!");
          return;
        }
        setDisplay();
      }, 1000);
    }
    function pauseTimer(){
      if(!timerInterval) return;
      stopIntervalOnly();
      setStatus("Paused");
    }
    function resetTimer(){
      stopIntervalOnly();
      timerRemainingSeconds = timerTotalSeconds;
      setDisplay();
      setStatus("Ready");
    }
    function stopIntervalOnly(){
      if(timerInterval){
        clearInterval(timerInterval);
        timerInterval = null;
        document.title = "DanBeem Vibe Site";
      }
    }
    function beep(){
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = "sine";
        osc.frequency.value = 880;
        gain.gain.value = 0.05;
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start();
        setTimeout(()=>{ osc.stop(); ctx.close(); }, 220);
      }catch{}
    }
    setDisplay();
  </script>
</body>
</html>